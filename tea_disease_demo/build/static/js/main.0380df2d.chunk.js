(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(t,e,n){},156:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),i=n(42),s=n(27),u=n(28),l=n(30),h=n(29),p=n(14);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=Object(p.a)(t);if(e){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(t){Object(l.a)(n,t);var e=f(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).onClose=function(t){return function(){r.setState(Object(i.a)({},t,!0))}},r.state={},r}return Object(u.a)(n,[{key:"photo",value:function(t){if(t){var e=t.target.files[0];this.props.history.push({pathname:"/Cropper",query:{file:e}})}}},{key:"render",value:function(){var t=this;return a.a.createElement("div",{style:{height:"100%"}},a.a.createElement("div",{className:"widthFix"},a.a.createElement("div",{className:"bg "}),a.a.createElement("p",{className:"tip"},"\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u6280\u672f\uff0c"),a.a.createElement("p",{className:"tip"},"\u5b9e\u73b0\u8336\u6811\u5178\u578b\u75c5\u5bb3\u8fdc\u7a0b\u63a8\u7406\u3001\u8bca\u65ad"),a.a.createElement("div",{className:"choose-btn"},a.a.createElement("input",{className:"picture",type:"file",name:"image",onChange:function(e){return t.photo(e)}}),"\u62cd \u7167 \u8bc6 \u8336")))}}]),n}(a.a.Component),v=(n(94),n(59)),y=n.n(v),d=n(33),g=n.n(d),b=(n(140),n(60)),w=n.n(b),E=n(61),j=n(83),O=n.n(j);n(145);function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=Object(p.a)(t);if(e){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var k=function(t){Object(l.a)(n,t);var e=R(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={imgSrc:null,height:0,file:null},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;if(this.props.location.query){var e=new FileReader;e.onload=function(e){var n=e.target.result;t.setState({imgSrc:n,height:window.innerHeight-47,file:t.props.location.query})},e.readAsDataURL(this.props.location.query.file)}else this.props.history.push({pathname:"/"})}},{key:"submit",value:function(){var t=Object(E.a)(g.a.mark(function t(){var e,n,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,n=this.refs.cropper.getCroppedCanvas({width:299,height:299}),r=n.toDataURL(),n.toBlob(function(){var t=Object(E.a)(g.a.mark(function t(n){var a,o,c;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("file",e.state.file.file),w.a.loading("\u8bc6\u522b\u4e2d",5e4,function(){console.log("Load complete !!!")}),t.next=5,fetch("/app/upload",{method:"POST",headers:{},body:a});case 5:return o=t.sent,t.next=8,o.json();case 8:c=t.sent,w.a.hide(),e.props.history.push({pathname:"/Result",query:{resultpic:r,results:c.result}});case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return a.a.createElement("div",null,a.a.createElement("div",{style:{height:"100%"}},a.a.createElement(O.a,{src:this.state.imgSrc,ref:"cropper",style:{height:this.state.height},viewMode:1,cropBoxMovable:!1,cropBoxResizable:!1,dragMode:"move",aspectRatio:1}),a.a.createElement("div",{className:"clBtn"},a.a.createElement(y.a,{inline:!0,onClick:function(){t.props.history.push({pathname:"/Photo"})}},"\u53d6\u6d88"),a.a.createElement(y.a,{inline:!0,onClick:function(){return t.submit()}},"\u786e\u5b9a"))))}}]),n}(a.a.Component),C=(n(146),n(84)),x=n.n(C),P=(n(150),n(85)),q=n.n(P),D=(n(45),n(41)),N=n.n(D),S=n(63);function B(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=Object(p.a)(t);if(e){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var M=[{path:"/",component:m,exact:!0},{path:"/Cropper",component:k},{path:"/Result",component:function(t){Object(l.a)(n,t);var e=B(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={resultPic:"",height:0,results:[]},r}return Object(u.a)(n,[{key:"componentWillMount",value:function(){this.props.location.query?this.setState({resultPic:this.props.location.query.resultpic,results:this.props.location.query.results,height:window.innerHeight}):this.setState(Object(S.a)({},this.props.location.state))}},{key:"componentDidMount",value:function(){if(this.props.location.query){var t=this.props.location.query.results;console.log(t),this.props.history.replace("/Result",Object(S.a)({},this.state,{resultPic:this.props.location.query.resultpic,results:t,height:window.innerHeight}))}}},{key:"render",value:function(){var t=this;return a.a.createElement("div",null,a.a.createElement(q.a,{mode:"light",icon:a.a.createElement(N.a,{type:"left"}),onLeftClick:function(){return t.props.history.push({pathname:"/Photo"})}},"\u8bc6\u522b\u7ed3\u679c"),a.a.createElement("div",{className:"resultPic",style:{backgroundImage:"url(".concat(this.state.resultPic,")"),height:.35*this.state.height}}),a.a.createElement("div",null,a.a.createElement(x.a,{autoplay:!1,infinite:!0,dots:!0,style:{height:.55*(this.state.height-45)}},this.state.results.map(function(e){return a.a.createElement("div",{className:"clCard",key:e,style:{height:.5*(t.state.height-45)}},a.a.createElement("div",{style:{height:"1rem"}},a.a.createElement("p",{style:{margin:"15% 0"}},"\u8336\u53f6\u75c5\u866b\u5bb3\u540d\u79f0\uff1a",a.a.createElement("span",{className:"green"},e.name)),a.a.createElement("p",null,"\u53ef\u80fd\u6027\uff1a",a.a.createElement("span",{className:"green"},e.score))))}))))}}]),n}(a.a.Component)},{path:"/Photo",component:m}],L=n(86),F=n(88);n(152),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(L.a,null,Object(F.a)(M)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},89:function(t,e,n){t.exports=n(156)}},[[89,1,2]]]);
//# sourceMappingURL=main.0380df2d.chunk.js.map